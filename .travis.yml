language: java
install: skip

os: linux
dist: trusty
jdk: openjdk8

env:
  global:
    DOCKER_REPO=brunoribca/cryptoinsights

jobs:
  include:
    - stage: build
      script: ./gradlew build
    - stage: docker build
      script: ./gradlew bootBuildImage --imageName=$DOCKER_REPO
    - stage: docker push
      if: branch = master
      script: ./docker_push.sh